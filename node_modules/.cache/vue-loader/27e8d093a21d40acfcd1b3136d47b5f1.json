{"remainingRequest":"C:\\Users\\18697\\Desktop\\小程序\\upload\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18697\\Desktop\\小程序\\upload\\src\\views\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18697\\Desktop\\小程序\\upload\\src\\views\\home.vue","mtime":1609044877791},{"path":"C:\\Users\\18697\\Desktop\\小程序\\upload\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608990168112},{"path":"C:\\Users\\18697\\Desktop\\小程序\\upload\\node_modules\\babel-loader\\lib\\index.js","mtime":1608990194810},{"path":"C:\\Users\\18697\\Desktop\\小程序\\upload\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608990168112},{"path":"C:\\Users\\18697\\Desktop\\小程序\\upload\\node_modules\\vue-loader\\lib\\index.js","mtime":1608990189388}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport mammoth from \"mammoth\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      fileurl: \"/file/upload\",\r\n      url: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    handleupload(event) {\r\n      console.log(event);\r\n      this.url = event.data;\r\n    },\r\n    handletap() {\r\n\t const xhr = new XMLHttpRequest();\r\n    xhr.open(\"get\", this.url, true);\r\n    xhr.responseType = \"arraybuffer\";\r\n    xhr.onload = function () {\r\n      if (xhr.status == 200) {\r\n\t\t  console.log('999');\r\n\t\t  console.log(xhr.response);\r\n        // mammoth\r\n        //   .convertToHtml({ arrayBuffer: new Uint8Array(xhr.response) })\r\n        //   .then(function (resultObject) {\r\n        //    console.log(resultObject);\r\n\t\t//   });\r\n\t\tmammoth.extractRawText({arrayBuffer: xhr.response})\r\n    \t\t.then(function(result){\r\n\t\t\tvar text = result.value; // The raw text\r\n\t\t\tconsole.log(text);\r\n        var messages = result.messages;\r\n    })\r\n    .done();\r\n      }\r\n    };\r\n    xhr.send();\r\n   \r\n    },\r\n  },\r\n};\r\n",{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <el-upload\r\n      class=\"upload-demo\"\r\n      :action=\"fileurl\"\r\n      :limit=\"1\"\r\n      :on-success=\"handleupload\"\r\n    >\r\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">\r\n        只能上传jpg/png文件，且不超过500kb\r\n      </div>\r\n    </el-upload>\r\n    <button @click=\"handletap\">预览</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mammoth from \"mammoth\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      fileurl: \"/file/upload\",\r\n      url: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    handleupload(event) {\r\n      console.log(event);\r\n      this.url = event.data;\r\n    },\r\n    handletap() {\r\n\t const xhr = new XMLHttpRequest();\r\n    xhr.open(\"get\", this.url, true);\r\n    xhr.responseType = \"arraybuffer\";\r\n    xhr.onload = function () {\r\n      if (xhr.status == 200) {\r\n\t\t  console.log('999');\r\n\t\t  console.log(xhr.response);\r\n        // mammoth\r\n        //   .convertToHtml({ arrayBuffer: new Uint8Array(xhr.response) })\r\n        //   .then(function (resultObject) {\r\n        //    console.log(resultObject);\r\n\t\t//   });\r\n\t\tmammoth.extractRawText({arrayBuffer: xhr.response})\r\n    \t\t.then(function(result){\r\n\t\t\tvar text = result.value; // The raw text\r\n\t\t\tconsole.log(text);\r\n        var messages = result.messages;\r\n    })\r\n    .done();\r\n      }\r\n    };\r\n    xhr.send();\r\n   \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\"></style>\r\n"]}]}